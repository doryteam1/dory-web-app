<div class="d-flex flex-row justify-content-center">
<div class="container">
    <div class="container__box-row">
        <div class="container__box-image">
            <img class="container__image" [src]="usuario?.foto ? usuario?.foto : 'assets/images/avatar-person.svg'">
            <div class="btn-group dropend container__image2">
              <div id="foto1">
                <img class="container__image2" src="assets/icons/camera.svg"  data-bs-toggle="dropdown" aria-expanded="false">
                <img class="container__image2" *ngIf="!usuario?.foto" src="assets/icons/camera.svg"   (click)="openAddFileDialog()">
              </div>
              <ul class="dropdown-menu">
                <li class="dropdown-menu--li">
                  <img src="assets/icons/delete_black_24dp.svg">
                  <a class="dropdown-item dropdown-item-myestilo" *ngIf="usuario?.foto" (click)="delatePhotoPerfil()">Eliminar </a></li>
                <li class="dropdown-menu--li">
                  <img src="assets/icons/update-icon-photo-perfil.svg">
                  <a class="dropdown-item dropdown-item-myestilo" *ngIf="usuario?.foto" (click)="openAddFileDialog()">Actualizar</a>
                </li>
              </ul>
            </div>
            <div class="container__spinner-photo spinner-border text-info" role="status" *ngIf="loadingPhoto">
            </div>
            <input #fileInput type="file" accept="image/png, image/jpeg" name="resume" (change)='fileChange($event)' hidden>
        </div>
        <div *ngIf="photoDelate" class="container__alert-msg danger-message">
          Foto de perfil  eliminada
        </div>
        <div *ngIf="photoUpdate" class="container__alert-msg danger-message">
          Foto de perfil  actualizada
        </div>
        <div class="container__info">
            <span class="container__label2">{{nombres?.value ? nombres?.value : '____' }} {{apellidos?.value ? apellidos?.value : '____' }}</span>
            <span class="container__label2">{{usuario?.tipo_usuario ? usuario?.tipo_usuario : '____'}}</span>
        </div>
    </div>
    <form id="CreateForm" [formGroup]="form">

    <div id="basicos">
      <div class="container__box__title">
          <span class="container__title mb-5">Datos básicos</span>
      </div>

      <div id="nombre" class="container-row row gx-5 align-items-center">
          <div class="col">
              <div class="container__box" *ngIf="mostrarPorTipo('nombres')">
                  <span class="container__label">Nombres</span>
                  <div class="input-wrapper">
                      <input name= "nombr" class="container__input form-input-text-square" (keyup)="onKeyInput($event ,'nombres', usuario.nombres)" [ngClass]="{'container__input--color':!editarperfil}"
                      type="text" formControlName='nombres' placeholder="Nombres">
                  </div>
              </div>
          </div>

          <div class="col">
              <div class="container__box left" *ngIf="mostrarPorTipo('apellidos')">
                  <span class="container__label">Apellidos</span>
                  <div class="input-wrapper">
                      <input class="container__input form-input-text-square" (keyup)="onKeyInput($event ,'apellidos', usuario.apellidos)"  [ngClass]="{'container__input--color':!editarperfil}"
                        type="text" formControlName='apellidos' placeholder="Apellidos">
                  </div>
              </div>
          </div>
      </div>

      <div class="container-row row align-items-center">
          <div class="col">
              <div class="container__box" *ngIf="mostrarPorTipo('cedula')">
                  <span class="container__label">Cédula</span>
                  <div class="input-wrapper">
                      <input class="container__input form-input-text-square" (keyup)="onKeyInput($event ,'cedula', usuario.cedula)" [ngClass]="{'container__input--color':!editarperfil}"
                        type="text" formControlName='cedula' placeholder="Tu número de cédula">
          <!--                     <img *ngIf="editarperfil" class="input-icon option" src="assets/icons/lock_open_black_24dp.svg">
                      <img *ngIf="!editarperfil" class="input-icon option" src="assets/icons/lock_black_24dp.svg"> -->
                  </div>
              </div>
          </div>

          <div class="col">
              <div class="container__box left" *ngIf="mostrarPorTipo('email')">
                  <span class="container__label">Correo electrónico</span>
                  <div class="input-wrapper">
                      <input class="container__input form-input-text-square"  [ngClass]="{'container__input--color':true}"
                      type="text" formControlName='email' placeholder="Ingresa tu correo electrónico">
                  </div>
              </div>
          </div>
      </div>

      <div class="container-row row align-items-center">
          <div id="celular" class="col">
              <div  class="container__box" *ngIf="mostrarPorTipo('celular')">
                  <span class="container__label">Celular</span>
                  <div class="input-wrapper">
                      <input class="container__input form-input-text-square" (keyup)="onKeyInput($event ,'celular', usuario.celular)" [ngClass]="{'container__input--color':!editarperfil}"
                        type="number" formControlName='celular' placeholder="Tu número de celular" onkeydown="javascript: return ['Backspace','Delete','ArrowLeft','ArrowRight'].includes(event.code) ? true : !isNaN(Number(event.key)) && event.code!=='Space'">
                  </div>
              </div>
          </div>

          <div class="col">
              <div class="container__box" *ngIf="mostrarPorTipo('fecha_nacimiento')">
                  <span class="container__label">Fecha de nacimiento: </span>
                  <div class="input-wrapper">
                      <input class="container__input form-input-text-square" (keyup)="onKeyInput($event)" [ngClass]="{'container__input--color':!editarperfil}"
                      type="date" formControlName='fecha_nacimiento' placeholder="Fecha de nacimiento">
                      <!-- <img *ngIf="editarperfil" class="input-icon option" src="assets/icons/lock_open_black_24dp.svg">
                      <img *ngIf="!editarperfil" class="input-icon option" src="assets/icons/lock_black_24dp.svg"> -->
                  </div>
              </div>
          </div>
      </div>
    </div>
        <div class="container__box__title">
          <span class="container__title">Foto de perfil</span>
        </div>
        <div class="d-flex flex-column justify-content-center align-items-center">
          <div class="progress" *ngIf="percentUploaded && percentUploaded > 1 && percentUploaded < 100">
            <div class="progress-bar" [style.width]="percentUploaded+'%'" role="progressbar"
              [attr.aria-valuenow]="percentUploaded" aria-valuemin="0" aria-valuemax="100">{{percentUploaded | number:'':'es'}}%
            </div>
          </div>
          <span class="text-danger" *ngIf="photoUpdate">Foto de perfil cargada con éxito</span>
          <span class="text-danger" *ngIf="photoDelate">Foto de perfil eliminada con éxito</span>
        </div>
    <div id="foto2" class="d-flex flex-row justify-content-center align-items-center gap-2">
      <button class="container__btn3 btn" *ngIf="!usuario?.foto" (click)="openAddFileDialog()">
        <div class="container__btn3-div">
          <img src="assets/icons/drive_folder_upload_animado_24dp.svg">
          <span>Escoger foto de perfil</span>
        </div>
      </button>
      <button class="container__btn3 btn" *ngIf="usuario?.foto" (click)="openAddFileDialog()">
        <div class="container__btn3-div">
          <img src="assets/icons/update-icon-photo-perfil.svg">
          <span>Actualizar foto de perfil</span>
        </div>
      </button>
      <button class="container__btn3 btn" *ngIf="usuario?.foto" (click)="delatePhotoPerfil()">
        <div class="container__btn3-div">
          <img src="assets/icons/delete_black_24dp.svg">
          <span>Eliminar foto de perfil</span>
        </div>
      </button>
    </div>
    <div id="ubicacion">
      <div class="container__box__title">
          <span class="container__title">Datos de ubicación</span>
      </div>
      <div class="container-row row">
          <div class="col">
              <div class="container__box" *ngIf="mostrarPorTipo('departamento')">
                  <span class="container__label">Departamento</span>
                  <div class="input-wrapper">
                      <select class="container__input form-input-text-square"  [ngClass]="{'container__input--color':true}"
                            formControlName='id_departamento' (ngModelChange)='changeDpto()'>
                          <optgroup label="Escoje un departamento" value="70">
                              <option *ngFor="let dpto of departamentos" [ngValue]="dpto.id_departamento">{{dpto.nombre_departamento}}</option>
                          </optgroup>
                      </select>
                  </div>
              </div>
          </div>

          <div id="municipio" class="col">
              <div class="container__box left" *ngIf="mostrarPorTipo('municipio')">
                  <span class="container__label">Municipio</span>
                  <div class="input-wrapper">
                    <select class="container__input form-input-text-square"  [ngClass]="{'container__input--color':!editarperfil}"
                        formControlName='id_municipio' (ngModelChange)='changeMunic()' >
                        <optgroup label="Escoge un municipio">
                            <option *ngFor="let municipio of municipios" [ngValue]="municipio.id_municipio" >{{municipio.nombre}}</option>
                        </optgroup>
                    </select>
                  </div>
              </div>
          </div>
      </div>
          <!--<div class="container__box" *ngIf="mostrarPorTipo('corregimiento')">
              <span class="container__label">Selecciona un corregimiento</span>
              <div>
                  <select class="container__input form-input-text-square" formControlName='id_corregimiento' (ngModelChange)="corregSelected()">
                      <optgroup label="Escoje un corregimiento">
                          <option *ngFor="let corregimiento of corregimientos" [ngValue]="corregimiento.id_corregimiento">{{corregimiento.nombre}}</option>
                      </optgroup>
                  </select>
              </div>
          </div>-->

          <!--<span class="container__label" *ngIf="mostrarPorTipo('vereda')">Selecciona una vereda</span>
          <div class="container__box" *ngIf="mostrarPorTipo('vereda')">
              <div>
                  <select class="container__input form-input-text-square" formControlName='id_vereda' (ngModelChange)='veredaSelected()'>
                      <optgroup label="Escoje una vereda">
                          <option *ngFor="let vereda of veredas" [ngValue]="vereda.id_vereda">{{vereda.nombre}}</option>
                      </optgroup>
                  </select>
              </div>
          </div>-->

          <!-- <div class="container__box" *ngIf="mostrarPorTipo('vereda')">
              <span class="container__label">Vereda</span>
              <div>
                  <input class="container__input form-input-text-square"  type="text" formControlName='nombre_vereda'>
              </div>
          </div> -->

      <div class="container-row row">
          <div class="col">
              <div class="container__box"  *ngIf="mostrarPorTipo('corregimiento')">
                  <span class="container__label">Corregimiento</span>
                  <div class="input-wrapper">
                    <input class="container__input form-input-text-square" (keyup)="onKeyInput($event ,'nombre_corregimiento', usuario.nombre_corregimiento)"  [ngClass]="{'container__input--color':!editarperfil}"
                      type="text" formControlName='nombre_corregimiento' placeholder="Corregimiento o vereda">
                  </div>
              </div>
          </div>
          <div id="direccion" class="col">
              <div class="container__box left" *ngIf="mostrarPorTipo('direccion')"   (click)="verMap()" >
                  <span class="container__label">Dirección: </span>
                  <div class="input-wrapper" ngbTooltip="{{mensajedirecion}}">
                    <input class="container__input form-input-text-square"
                    [ngClass]="{'container__input--color':!editarperfil , 'container__input--direccion': editarperfil}"
                    type="text" formControlName='direccion' placeholder="Selecciona aquí  tu direccón" >
                    <img *ngIf="editarperfil" class="input-icon option" src ="assets/icons/ojoanimado.svg">
                    <img *ngIf="!editarperfil" class="input-icon option" src ="assets/icons/ojoanimadocerrado.svg">
                  </div>
              </div>
              <div *ngIf="faltadireccion" class="container__alert-msg danger-message">
                  Campo requerido
              </div>
          </div>
      </div>

      <div class="container-row row">
          <div class="col">
              <div class="container__box"  *ngIf="mostrarPorTipo('corregimiento')">
                  <label  class="container__label" for="dateOfBirth">Información adicional de la dirección</label>
                  <div class="input-group">
                    <div class="input-wrapper">
                      <textarea  (keyup)="onKeyInput($event ,'informacion_adicional_direccion', usuario.informacion_adicional_direccion)" class="form-control" [ngClass]="{'container__input--color':!editarperfil}"
                        name="textarea" rows="3" cols="50"
                        placeholder="Información adicional de la ubicación seleccionada"
                        formControlName="informacion_adicional_direccion">Escribe algo aquí</textarea>
                    </div>
                  </div>
              </div>
          </div>

          <div class="col">

          </div>
      </div>
    </div>

<!--     <div class="d-flex flex-row justify-content-center">
        <button class="container__btn2" *ngIf="mostrarPorTipo('coordenadas')" (click)="verMap()">
            <span>Escoger mi ubicación</span>
            <i class="bi bi-geo-alt left"></i>
        </button>
    </div> -->

    <div class="container__box__title" *ngIf="mostrarPorTipo('area_experticia') || mostrarPorTipo('otra_area_experticia') || mostrarPorTipo('otra_area_experticia_descripcion') || mostrarPorTipo('sobre_mi')">
        <span class="container__title">Otros datos</span>
    </div>

    <div class="container-row row">
        <!-- <div class="container__box" *ngIf="mostrarPorTipo('nombre_negocio')">
            <span class="container__label">Nombre del negocio: </span>
            <div>
                <input class="container__input form-input-text-square"  type="text" formControlName='nombre_negocio' placeholder="Nombres">
            </div>
        </div> -->
        <div class="col">
            <div class="d-flex flex-column">
                <span class="container__label" *ngIf="mostrarPorTipo('area_experticia')">Área de experticia</span>
                <div class="container__box-row" *ngIf="mostrarPorTipo('area_experticia')">
                    <select class="container__input form-input-text-square"
                          formControlName='id_area_experticia' (change)="onAreaExpChange()" [ngClass]="{'container__input--color':!editarperfil}">
                        <optgroup label="Escoje un área">
                            <option *ngFor="let area of areas" [ngValue]="area.id_area">{{area.nombre}} </option>
                            <option [ngValue]='-1'>Otra...</option>
                        </optgroup>
                    </select>
                </div>
            </div>
        </div>

        <div class="col">
            <div class="container__box left" *ngIf="mostrarPorTipo('sobre_mi')">
                <span class="container__label">Cuéntanos sobre ti: </span>
                <div>
                    <input class="container__input form-input-text-square"  (keyup)="onKeyInput($event ,'sobre_mi', usuario.sobre_mi)"
                    type="text" formControlName='sobre_mi' placeholder="Cuéntanos sobre ti" [ngClass]="{'container__input--color':!editarperfil}">
                </div>
            </div>
        </div>
    </div>

    <div class="container-row row">
        <div class="col">
            <div class="container__box" *ngIf="mostrarPorTipo('otra_area_experticia_descripcion') && idAreaExpert?.value ==-1">
                <span class="container__label">Cuéntanos en que consiste tu área experticia: </span>
                <div>
                    <input class="container__input form-input-text-square"  type="text-area"
                    formControlName='otra_area_experticia_descripcion'
                     placeholder="En que consiste tu área de experticia"
                     (keyup)="onKeyInput($event ,'otra_area_experticia_descripcion', usuario.otra_area_experticia_descripcion)"
                     [ngClass]="{'container__input--color':!editarperfil}">
                </div>
            </div>
        </div>
        <div class="col">
            <div class="container__box left" *ngIf="mostrarPorTipo('otra_area_experticia') && idAreaExpert?.value ==-1">
                <span class="container__label">Escribe el nombre del área experticia: </span>
                <div>
                    <input class="container__input form-input-text-square"  type="text"
                    (keyup)="onKeyInput($event ,'otra_area_experticia', usuario.otra_area_experticia)"
                     [ngClass]="{'container__input--color':!editarperfil}"
                    formControlName='otra_area_experticia'
                    placeholder="Tu área de experticia">
                </div>
            </div>
        </div>
    </div>
        <!-- <div class="container__box" *ngIf="mostrarPorTipo('coordenadas')">
            <span class="container__label">Latitud</span>
            <div>
                <input class="container__input form-input-text-square"  type="text" formControlName='latitud'>
            </div>
        </div>
        <div class="container__box" *ngIf="mostrarPorTipo('coordenadas')">
            <span class="container__label">Longitud</span>
            <div>
                <input class="container__input form-input-text-square"  type="text" formControlName='longitud'>
            </div>
        </div> -->


    </form>

<div class="d-flex flex-row justify-content-center align-items-center gap-2 mt-3">
  <button class="container__btn3 btn" *ngIf="!editarperfil" (click)="editarPerfi()">
    <div class="container__btn3-div">
      <img src="assets/icons/edit_note_azul1_24dp.svg">
      <span>Editar perfil</span>
    </div>
  </button>
  <button class="container__btn3  btn" *ngIf="editarperfil" (click)="cancelProfileEditing()">
    <div class="container__btn3-div">
      <img src="assets/icons/clear_azul1_24dp.svg">
      <span>Cancelar edición</span>
    </div>
  </button>
  <button class="container__btn3 btn" *ngIf="editarperfil && EditedInputValue" (click)="onSubmit()">
    <div class="container__btn3-div">
      <img src="assets/icons/save_as_azul1_24dp.svg">
      <span>Guardar cambios</span>
    </div>
  </button>
</div>

 </div>
</div>
<!-- Modal -->
<ng-template #map let-modal >
  <div class="modal-header footerheadermodal">
    <!-- header modal -->
  <div class="search">
    <input class="container__input2" placeholder="Buscar en Google Map" (keyup)="onKey($event)" (keyup.enter)="buscar()"
      [(ngModel)]="buscarx">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="42" height="42" fill="none" *ngIf="loadingseart">
      <path stroke="#0A0A30" stroke-linecap="round" stroke-width="1.5"
        d="M12 6.864v1.333m0 7.606v1.333M17.136 12h-1.333m-7.606 0H6.864m8.768 3.632l-.943-.943M9.311 9.311l-.943-.943m0 7.264l.943-.943m5.378-5.378l.943-.943"
        style="animation:loader4 1.5s linear infinite both;transform-origin:center center" />
    </svg>
    <i class="bi bi-search img-search" (click)="buscar()" placement="bottom" ngbTooltip="Búsqueda"
      *ngIf="!loadingseart"></i>
    <div class="d-flex" style="height: 34px;color: rgb(158, 158, 167);">
      <div class="vr">
      </div>
    </div>
    <i class="bi bi-x img-x" (click)="borrarBusqueda()" placement="bottom" ngbTooltip="Borrar búsqueda"
      *ngIf="borrarseart"></i>
  </div>

    <!-- button close- modal -->
    <button type="button" class="btn-close button_close" aria-label="Close" (click)="modal.dismiss('Cross click')"
      placement="bottom" ngbTooltip="Salir"></button>
  </div>
  <div class="modal-body  map" *ngIf="apiLoaded | async">
    <!-- fuera de sucre -click fuera-->
    <div class="alert alert-danger d-flex bd-highlight  alertclass" *ngIf=" fueraDirecion" role="alert">
      <div class="p-2 bd-highlight">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none">
          <path class="prefix__n-info-tri" style="animation-delay:1s" stroke="#0A0A30" stroke-width="1.5"
            d="M11.134 6.844a1 1 0 011.732 0l5.954 10.312a1 1 0 01-.866 1.5H6.046a1 1 0 01-.866-1.5l5.954-10.312z" />
          <g class="prefix__n-info-tri">
            <path stroke="#265BFF" stroke-linecap="round" stroke-width="1.5" d="M12 10.284v3.206" />
            <circle cx="12" cy="15.605" r=".832" fill="#265BFF" />
          </g>
        </svg>
      </div>
      <div class="p-2 bd-highlight">
        No puedes escoger una ubicación fuera del departamento de Sucre
      </div>
      <div class="ms-auto p-2 bd-highlight">
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>

    </div>
      <!-- no se encontraron datos -->
      <div class="alert alert-danger d-flex bd-highlight  alertclass" *ngIf="noexistendatos" role="alert">
        <div class="p-2 bd-highlight">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none">
            <path class="prefix__n-info-tri" style="animation-delay:1s" stroke="#0A0A30" stroke-width="1.5"
              d="M11.134 6.844a1 1 0 011.732 0l5.954 10.312a1 1 0 01-.866 1.5H6.046a1 1 0 01-.866-1.5l5.954-10.312z" />
            <g class="prefix__n-info-tri">
              <path stroke="#265BFF" stroke-linecap="round" stroke-width="1.5" d="M12 10.284v3.206" />
              <circle cx="12" cy="15.605" r=".832" fill="#265BFF" />
            </g>
          </svg>
        </div>
        <div class="p-2 bd-highlight">
          Google Maps no puede encontrar <strong>{{valorbuscarx}}</strong>
          Asegúrese de que su búsqueda esté escrita correctamente. Intente agregar una ciudad, estado o código postal.
        </div>
        <div class="ms-auto p-2 bd-highlight">
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      </div>
        <!-- escoger mi ubicación -->
        <div class="alert alert-danger d-flex bd-highlight  alertclass" *ngIf="escogerdireccion" role="alert">
          <div class="p-2 bd-highlight">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none">
              <path class="prefix__n-info-tri" style="animation-delay:1s" stroke="#0A0A30" stroke-width="1.5"
                d="M11.134 6.844a1 1 0 011.732 0l5.954 10.312a1 1 0 01-.866 1.5H6.046a1 1 0 01-.866-1.5l5.954-10.312z" />
              <g class="prefix__n-info-tri">
                <path stroke="#265BFF" stroke-linecap="round" stroke-width="1.5" d="M12 10.284v3.206" />
                <circle cx="12" cy="15.605" r=".832" fill="#265BFF" />
              </g>
            </svg>
          </div>
          <div class="p-2 bd-highlight">
            Por favor escoge tu <strong> dirección</strong>
          </div>
          <div class="ms-auto p-2 bd-highlight">
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        </div>

    <google-map width="1200px" height="550px" class="modal-dialog-centered" [options]="options"
      (mapClick)="addMarker($event)">
      <map-marker [position]="markerPosition" [options]="markerOptions" title="Title"></map-marker>
      <map-polyline [path]="vertices" [options]="optionPoli">
      </map-polyline>
    </google-map>
  </div>
</ng-template>
<ngx-spinner type="square-jelly-box"></ngx-spinner>
<!--      <app-basic-floating-btn [editar]="true" *ngIf="!editarperfil" (click)="editarPerfi()" >
    </app-basic-floating-btn>
    <app-basic-floating-btn [cancelar]="true"  *ngIf="editarperfil" (click)="cancelProfileEditing()">
    </app-basic-floating-btn>
    <app-basic-floating-btn [actualizar]="true"  *ngIf="editarperfil && EditedInputValue" (click)="onSubmit()">
    </app-basic-floating-btn>
 -->