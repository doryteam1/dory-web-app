<div class="row">
<div class="container">
    <div class="container__box-row">
        <div class="container__box-image">    
            <img class="container__image img-fluid" [src]="usuario?.foto ? usuario?.foto : 'assets/images/avatar-person.svg'">
            <img class="container__image2 img-fluid" src="assets/icons/camera.svg" (click)="openAddFileDialog()">
            <input #fileInput type="file" name="resume" (change)='fileChange($event)' hidden>
        </div>
        <div class="container__info">
            <span class="container__title">{{nombres?.value ? nombres?.value : '____' }} {{apellidos?.value ? apellidos?.value : '____' }}</span>
            <span class="container__title">{{usuario?.tipo_usuario ? usuario?.tipo_usuario : '____'}}</span>
        </div>
    </div>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">

    <div class="container__box mt-4" *ngIf="mostrarPorTipo('cedula')">
        <span class="container__title">Cedula</span>
        <div>
            <input class="container__input form-input-text-square"  type="text" formControlName='cedula'>
        </div>
    </div>

    <div class="container__box" *ngIf="mostrarPorTipo('nombres')">
        <span class="container__title">Nombres</span>
        <div>
            <input class="container__input form-input-text-square"  type="text" formControlName='nombres'>
        </div>
    </div>

    <div class="container__box" *ngIf="mostrarPorTipo('apellidos')">
        <span class="container__title">Apellidos</span>
        <div>
            <input class="container__input form-input-text-square"  type="text" formControlName='apellidos'>
        </div>
    </div>

    <div class="container__box" *ngIf="mostrarPorTipo('celular')">
        <span class="container__title">Celular</span>
        <div>
            <input class="container__input form-input-text-square"  type="text" formControlName='celular'>
        </div>
    </div>

    <div class="container__box" *ngIf="mostrarPorTipo('email')">
        <span class="container__title">Correo electrónico</span>
        <div>
            <input class="container__input form-input-text-square"  type="text" formControlName='email'>
        </div>
    </div>
    
    <div class="container__box" *ngIf="mostrarPorTipo('fecha_nacimiento')">
        <span class="container__title">Fecha de nacimiento: </span>
        <div>
            <input class="container__input form-input-text-square" type="date" formControlName='fecha_nacimiento'>
        </div>
    </div>
    
    <div class="container__box" *ngIf="mostrarPorTipo('departamento')">
        <span class="container__title">Departamento</span>
        <div>
            <select class="container__input form-input-text-square" formControlName='id_departamento' (ngModelChange)='changeDpto()'>
                <optgroup label="Escoje un departamento" value="70">
                    <option *ngFor="let dpto of departamentos" [ngValue]="dpto.id_departamento">{{dpto.nombre_departamento}}</option>
                </optgroup>
            </select>
        </div>
    </div>
    
    <div class="container__box" *ngIf="mostrarPorTipo('municipio')">
        <span class="container__title">Municipio</span>
        <div>
            <select class="container__input form-input-text-square" formControlName='id_municipio' (ngModelChange)='changeMunic()'>
                <optgroup label="Escoge un municipio">
                    <option *ngFor="let municipio of municipios" [ngValue]="municipio.id_municipio">{{municipio.nombre}}</option>
                </optgroup>
            </select>
        </div>
    </div>
    
    <!--<div class="container__box" *ngIf="mostrarPorTipo('corregimiento')">
        <span class="container__title">Selecciona un corregimiento</span>
        <div>
            <select class="container__input form-input-text-square" formControlName='id_corregimiento' (ngModelChange)="corregSelected()">
                <optgroup label="Escoje un corregimiento">
                    <option *ngFor="let corregimiento of corregimientos" [ngValue]="corregimiento.id_corregimiento">{{corregimiento.nombre}}</option>
                </optgroup>
            </select>
        </div>
    </div>-->
    
    <div *ngIf="mostrarPorTipo('corregimiento')">
        <span class="container__title">Corregimiento</span>
        <input class="container__input form-input-text-square" type="text" formControlName='nombre_corregimiento'>
    </div>
        
    <!--<span class="container__title" *ngIf="mostrarPorTipo('vereda')">Selecciona una vereda</span>
    <div class="container__box" *ngIf="mostrarPorTipo('vereda')">
        <div>
            <select class="container__input form-input-text-square" formControlName='id_vereda' (ngModelChange)='veredaSelected()'>
                <optgroup label="Escoje una vereda">
                    <option *ngFor="let vereda of veredas" [ngValue]="vereda.id_vereda">{{vereda.nombre}}</option>
                </optgroup>
            </select>
        </div>
    </div>-->

    <div class="container__box" *ngIf="mostrarPorTipo('vereda')">
        <span class="container__title">Vereda</span>
        <div>
            <input class="container__input form-input-text-square"  type="text" formControlName='nombre_vereda'>
        </div>
    </div>
    
    <div class="container__box" *ngIf="mostrarPorTipo('direccion')">
        <span class="container__title">Dirección: </span>
        <div>
            <input class="container__input form-input-text-square"  type="text" formControlName='direccion'>
        </div>
    </div>
    <div class="container__box" *ngIf="mostrarPorTipo('nombre_negocio')">
        <span class="container__title">Nombre del negocio: </span>
        <div>
            <input class="container__input form-input-text-square"  type="text" formControlName='nombre_negocio'>
        </div>
    </div>

    <span class="container__title" *ngIf="mostrarPorTipo('area_experticia')">Area de experticia</span>
    <div class="container__box-row" *ngIf="mostrarPorTipo('area_experticia')">
        <select class="container__input form-input-text-square" formControlName='id_area_experticia' (change)="onAreaExpChange()">
            <optgroup label="Escoje un area">
                <option *ngFor="let area of areas" [ngValue]="area.id_area">{{area.nombre}}</option>
                <option ngValue=-1>Otra...</option>
            </optgroup>
        </select>
    </div>

    <div *ngIf="idAreaExpert?.value ==-1">
        <div class="container__box" *ngIf="mostrarPorTipo('otra_area_experticia')">
            <span class="container__title">Escribe el nombre del area experticia: </span>
            <div>
                <input class="container__input form-input-text-square"  type="text" formControlName='otra_area_experticia'>
            </div>
        </div>
        <div class="container__box" *ngIf="mostrarPorTipo('otra_area_experticia_descripcion')">
            <span class="container__title">Cuentanos en que consiste tu area experticia: </span>
            <div>
                <input class="container__input form-input-text-square"  type="text-area" formControlName='otra_area_experticia_descripcion'>
            </div>
        </div>
    </div>
    <div class="container__box" *ngIf="mostrarPorTipo('sobre_mi')">
        <span class="container__title">Cuentanos sobre ti: </span>
        <div>
            <input class="container__input form-input-text-square"  type="text" formControlName='sobre_mi'>
        </div>
    </div>
    <div class="container__box" *ngIf="mostrarPorTipo('coordenadas')">
        <span class="container__title">Latitud</span>
        <div>
            <input class="container__input form-input-text-square"  type="text" formControlName='latitud'>
        </div>
    </div>
    <div class="container__box" *ngIf="mostrarPorTipo('coordenadas')">
        <span class="container__title">Longitud</span>
        <div>
            <input class="container__input form-input-text-square"  type="text" formControlName='longitud'>
        </div>
    </div>
    <span class="container__title" *ngIf="mostrarPorTipo('coordenadas')">Ubicacion mapa: <span class="container_link" (click)="showMap = !showMap">{{showMap ? 'Ocultar Mapa' : 'Ver mapa'}}</span></span>

    <button class="container__btn">
        <span *ngIf="!loading">Actualizar</span>
        <div class="container__spinner spinner-border text-danger" role="status" *ngIf="loading">
        </div>
    </button>
    
    </form>
</div>

<div class="map" *ngIf="showMap">
    <div *ngIf="apiLoaded | async">
        <google-map height="610px"
                    width="800px" 
                    [options]="options"
                    (mapClick)="addMarker($event)">
            <map-marker [position]="markerPosition" [options]="markerOptions"  title="Title"></map-marker>
            <map-polyline [path]="vertices" [options]="optionPoli">
            </map-polyline>
            <button id="Logout" class="toggle-button controls button" (click)="currentPosition()">Mi ubicación</button>
        </google-map>
    </div>
</div>
</div>
<ngx-spinner type="square-jelly-box"></ngx-spinner>