<nav class="navbar sticky-top navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <img class="logo" src="assets/images/logo-no-name.svg" routerLink="/home">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" routerLink="/home">Inicio</a>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Dory
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" routerLink="/nosotros">¿Quiénes somos?</a></li>
              <li><a class="dropdown-item" routerLink="/equipo">Equipo de trabajo</a></li>
              <li><a class="dropdown-item" routerLink="/contacto">Contáctanos</a></li>
            </ul>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Productores
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" routerLink="/granjas">Granjas</a></li>
              <li><a class="dropdown-item" routerLink="/piscicultores">Piscicultores</a></li>
              <li><a class="dropdown-item" routerLink="/pescadores">Pescadores</a></li>
              <li><a class="dropdown-item" routerLink="/asociaciones">Asociaciones</a></li>
            </ul>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Novedades y Actualidad
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" routerLink="/novedades/articulos">Artículos</a></li>
              <li><a class="dropdown-item" routerLink="/novedades/articulos-colombia">Artículos Colombianos</a></li>
              <li><a class="dropdown-item" routerLink="/novedades/revistas">Revistas</a></li>
              <li><a class="dropdown-item" routerLink="/novedades/noticias">Noticias</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Eventos
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" routerLink="/eventos/cursos">Cursos</a></li>
              <li><a class="dropdown-item" routerLink="/eventos/capacitaciones">Capacitaciones</a></li>
              <li><a class="dropdown-item" routerLink="/eventos/congresos">Congresos</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Normatividad
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" routerLink="/normatividad/leyes">Leyes</a></li>
              <!--<li><a class="dropdown-item" routerLink="/normatividad/estatutos">Estatutos</a></li>-->
              <li><a class="dropdown-item" routerLink="/normatividad/decretos">Decretos</a></li>
              <li><a class="dropdown-item" routerLink="/normatividad/resoluciones">Resoluciones</a></li>
            </ul>
          </li>
        </ul>
        <!-- <form class="d-flex">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form> -->
        <button class="btn-outline-blue boton-registro" (click)="login()" *ngIf="!authenticated()">Ingresar</button>
        <button class="btn-rounded-blue ms-2" routerLink="/registro" *ngIf="!authenticated()">Registrate</button>

        <div class="notify dropstart" *ngIf="authenticated()">
          <div class="notify__box position-relative " id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside" (click)="notificatiosOpened = true">
            <i class="notify__icon bi bi-bell">
            </i>
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" *ngIf="!notificatiosOpened && invitaciones?.length! > 0">
              {{invitaciones?.length}}
              <span class="visually-hidden">tienes notificaciones</span>
            </span>
          </div>

          <!-- [ngClass]="[(invitaciones.length + invitacionesFromUsers.length) < 9 ? notifyHeights[(invitaciones.length + invitacionesFromUsers.length)] : '',]" -->
          <ul #notifies class="notify__menu notify__menu dropdown-menu p-3 overflow-auto"  aria-labelledby="dropdownMenuButton1" (onresize)="onResize()">
            <li class="notify__title"><span *ngIf="invitaciones.length > 0 || invitacionesFromUsers.length > 0">Notificaciones</span></li>
            <li class="notify__sub-title"><span *ngIf="invitaciones.length > 0">Solicitudes de asociaciones</span></li>
            <li class="notify__menu-item" *ngFor="let invitacion of invitaciones; let i=index"> 
              <div class="dropdown-item d-flex flex-row align-items-start">
                <img class="notify__avatar" [src]="invitacion.foto_representante_legal">
                <div class="d-flex flex-column ">
                  <span class="notify__description"><span class="notify__label">{{invitacion?.representante_legal}}</span> te han invitado a indicar que eres miembro de <span class="notify__label">{{invitacion.asociacion}}</span></span>
                  <span class="notify__sub-description">
                    {{timeToNow(invitacion?.fecha_solicitud)}} · ¿Te gustaria ser miembro?
                  </span>
                  <div class="d-flex flex-row mt-2" *ngIf="!invitacion.message">
                    <button class="notify-button btn-square btn--blue" (click)="confirmarInvitacion(invitacion)">Confirmar</button>
                    <button class="notify-button btn-square btn--grey" (click)="eliminarInvitacion(invitacion)">Eliminar</button>
                  </div>
                  <span class="notify__message" *ngIf="invitacion.message">{{invitacion.message}}</span>
                </div>
              </div>
              <hr class="dropdown-divider" *ngIf="i < invitaciones.length - 1">
            </li>

            <li class="notify__sub-title"><span *ngIf="invitacionesFromUsers.length > 0">Solicitudes de usuarios</span></li>
            <li class="notify__menu-item" *ngFor="let invitacion of invitacionesFromUsers; let i=index"> 
              <div class="dropdown-item d-flex flex-row align-items-start">
                <img class="notify__avatar" [src]="invitacion.foto">
                <div class="d-flex flex-column ">
                  <span class="notify__description"><span class="notify__label">{{invitacion?.nombre_quien_envia}}</span> ha indicado que es miembro de la asociación <span class="notify__label">{{invitacion.asociacion}}</span></span>
                  <span class="notify__sub-description">
                    {{timeToNow(invitacion?.fecha_solicitud)}} · ¿Es miembro de esta asociación?
                  </span>
                  <div class="d-flex flex-row mt-2" *ngIf="!invitacion.message">
                    <button class="notify-button btn-square btn--blue" (click)="confirmarInvitacion(invitacion)">Confirmar</button>
                    <button class="notify-button btn-square btn--grey" (click)="eliminarInvitacion(invitacion)">Eliminar</button>
                  </div>
                  <span class="notify__message" *ngIf="invitacion.message">{{invitacion.message}}</span>
                </div>
              </div>
              <hr class="dropdown-divider" *ngIf="i < invitaciones.length - 1">
            </li>
            <div class="search-container" *ngIf="invitaciones.length < 1 && invitacionesFromUsers.length < 1">
              <div class="search-container__box">
                  <img class="search-container__image" src="assets/images/inbox_cleanup.svg">
                  <h3 class="search-container__title">No se han encontrado resultados</h3>
                  <p class="search-container__description">No tienes notificaciones </p>
              </div>
            </div>
            <li *ngFor="let test of tests"><span>{{test}}</span></li>
          </ul>
          
        </div>

        <div class="dropdown" *ngIf="authenticated()">
          <img class="container__img" [src]="authUserPhoto() ? authUserPhoto() : '../../../assets/images/avatar-person.svg'">
          <button class="container__button btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
            {{nomCom}}
          </button>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
            <li><button class="dropdown-item" type="button" routerLink="/dashboard">Mi cuenta</button></li>
             <li><button class="dropdown-item" type="button" routerLink="/dashboard/mis-favoritos">Mis favoritos</button></li>
            <li><button class="dropdown-item" type="button" (click)="updatePassword()" *ngIf="authWith()=='email'">Cambiar contraseña</button></li>
            <li><button class="dropdown-item" type="button" (click)="logout()">Salir</button></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>
