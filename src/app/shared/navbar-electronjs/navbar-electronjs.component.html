<nav class="navbar navbar-expand-miestilo navbar-light bg-light navbar--mi-stilo">
  <div class="container-fluid bg-light" style="height: 100%;
    padding-left: 0;
    padding-right: 0;;">
    <div style="display: flex;
    height: 100%;">
      <div class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon" style="height: 20px; -webkit-app-region: no-drag;"></span>
      </div>
        <div class="navbar-toggler"  style="border: none;height: 100%;">
          <div style=" display: flex; gap: 5px; height: 100%; justify-content: center; align-items: center;">
            <input class="container__input form-input-text-square" type="text" placeholder="Buscar...">
            <button class=" boton-ingresar2 btn" (click)="login()" *ngIf="!authenticated()"
              style="-webkit-app-region: no-drag;">Ingresar</button>
            <button class="ms-2 boton-registrate2 btn" (click)="navegarRuta('/registro')" *ngIf="!authenticated()"
              style="-webkit-app-region: no-drag;">Registrate</button>
            <div class="notify dropstart" *ngIf="authenticated()" style="-webkit-app-region: no-drag;">
              <div class="notify__box position-relative " id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"
                data-bs-auto-close="outside" (click)="notificatiosOpened = true">
                <i class="notify__icon bi bi-bell">
                </i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                  *ngIf="!notificatiosOpened && invitaciones?.length! > 0">
                  {{invitaciones?.length}}
                  <span class="visually-hidden">tienes notificaciones</span>
                </span>
              </div>
              <!-- [ngClass]="[(invitaciones.length + invitacionesFromUsers.length) < 9 ? notifyHeights[(invitaciones.length + invitacionesFromUsers.length)] : '',]" -->
              <ul #notifies class="notify__menu notify__menu dropdown-menu p-3 overflow-auto"
                [ngClass]="{'notify__menu--max-heigth' : notifiesHeigth > 356 }" aria-labelledby="dropdownMenuButton1"
                (onresize)="onResize()" style="-webkit-app-region: no-drag;">
                <li class="notify__title"><span
                    *ngIf="invitaciones.length > 0 || invitacionesFromUsers.length > 0">Notificaciones</span></li>
                <li class="notify__sub-title"><span *ngIf="invitaciones.length > 0">Solicitudes de asociaciones</span></li>
                <li class="notify__menu-item" *ngFor="let invitacion of invitaciones; let i=index">
                  <div class="dropdown-item d-flex flex-row align-items-start">
                    <img class="notify__avatar" [src]="invitacion.foto_representante_legal">
                    <div class="d-flex flex-column ">
                      <span class="notify__description"><span class="notify__label">{{invitacion?.representante_legal}}</span>
                        te han invitado a indicar que eres miembro de <span
                          class="notify__label">{{invitacion.asociacion}}</span></span>
                      <span class="notify__sub-description">
                        {{timeToNow(invitacion?.fecha_solicitud)}} · ¿Te gustaria ser miembro?
                      </span>
                      <div class="d-flex flex-row mt-2" *ngIf="!invitacion.message">
                        <button class="notify-button btn-square btn--blue"
                          (click)="confirmarInvitacion(invitacion)">Confirmar</button>
                        <button class="notify-button btn-square btn--grey"
                          (click)="eliminarInvitacion(invitacion)">Eliminar</button>
                      </div>
                      <span class="notify__message" *ngIf="invitacion.message">{{invitacion.message}}</span>
                    </div>
                  </div>
                  <hr class="dropdown-divider" *ngIf="i < invitaciones.length - 1">
                </li>
                <li class="notify__sub-title"><span *ngIf="invitacionesFromUsers.length > 0">Solicitudes de usuarios</span>
                </li>
                <li class="notify__menu-item" *ngFor="let invitacion of invitacionesFromUsers; let i=index">
                  <div class="dropdown-item d-flex flex-row align-items-start">
                    <img class="notify__avatar" [src]="invitacion.foto">
                    <div class="d-flex flex-column ">
                      <span class="notify__description"><span class="notify__label">{{invitacion?.nombre_quien_envia}}</span>
                        ha indicado que es miembro de la asociación <span
                          class="notify__label">{{invitacion.asociacion}}</span></span>
                      <span class="notify__sub-description">
                        {{timeToNow(invitacion?.fecha_solicitud)}} · ¿Es miembro de esta asociación?
                      </span>
                      <div class="d-flex flex-row mt-2" *ngIf="!invitacion.message">
                        <button class="notify-button btn-square btn--blue"
                          (click)="confirmarInvitacion(invitacion)">Confirmar</button>
                        <button class="notify-button btn-square btn--grey"
                          (click)="eliminarInvitacion(invitacion)">Eliminar</button>
                      </div>
                      <span class="notify__message" *ngIf="invitacion.message">{{invitacion.message}}</span>
                    </div>
                  </div>
                  <hr class="dropdown-divider" *ngIf="i < invitacionesFromUsers.length - 1">
                </li>
                <div class="search-container" *ngIf="invitaciones.length < 1 && invitacionesFromUsers.length < 1">
                  <div class="search-container__box">
                    <img class="search-container__image" src="assets/images/inbox_cleanup.svg">
                    <h3 class="search-container__title">No se han encontrado resultados</h3>
                    <p class="search-container__description">No tienes notificaciones </p>
                  </div>
                </div>
                <li *ngFor="let test of tests"><span>{{test}}</span></li>
              </ul>

            </div>
            <div class="dropdown" *ngIf="authenticated()" style="-webkit-app-region: no-drag; display: flex; justify-content: center; align-items: center;">
              <img class="container__img" [src]="authUserPhoto() ? authUserPhoto() : '../../../assets/images/avatar-person.svg'">
              <button class="container__button btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2"
                data-bs-toggle="dropdown" aria-expanded="false">
                {{authUserNomApell()}}
              </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                <li><button class="dropdown-item" type="button" (click)="navegarRuta('/dashboard')">Mi cuenta</button></li>
                <li><button class="dropdown-item" type="button" (click)="navegarRuta('/dashboard/mis-favoritos')">Mis
                    favoritos</button>
                </li>
                <li><button class="dropdown-item" type="button" (click)="updatePassword()" *ngIf="authWith()=='email'">Cambiar
                    contraseña</button></li>
                <li><button class="dropdown-item" type="button" (click)="logout()">Salir</button></li>
              </ul>
            </div>
          </div>
        </div>
    </div>
    <div class="collapse navbar-collapse" id="navbarSupportedContent" style="background: transparent;">
      <ul class="navbar-nav  mb-2 mb-lg-0 bg-light" style="width: max-content; padding-left: 15px;padding-right: 15px; gap: 1px;">
        <li *ngIf="electronjs && currentRoute !== '/home'" class="nav-item" style="-webkit-app-region: no-drag;">
          <a class="nav-link " id="navbarDropdown" role="button" (click)="navegarRuta('/home')">
            Inicio
          </a>
        </li>
        <li class="nav-item dropdown" style="-webkit-app-region: no-drag;">
          <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            Dory
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item"  (click)="navegarRuta('/nosotros')">¿Quiénes somos?</a></li>
            <li><a class="dropdown-item"  (click)="navegarRuta('/equipo')">Equipo de trabajo</a></li>
            <li><a class="dropdown-item"  (click)="navegarRuta('/contacto')">Contáctanos</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown" style="-webkit-app-region: no-drag;">
          <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            Productores
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown" style="-webkit-app-region: no-drag;">
            <li><a class="dropdown-item"  (click)="navegarRuta('/granjas')">Granjas</a></li>
            <li><a class="dropdown-item"  (click)="navegarRuta('/piscicultores')">Piscicultores</a></li>
            <li><a class="dropdown-item"  (click)="navegarRuta('/pescadores')">Pescadores</a></li>
            <li><a class="dropdown-item"  (click)="navegarRuta('/asociaciones')">Asociaciones</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown" style="-webkit-app-region: no-drag;">
          <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            Novedades y Actualidad
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown" style="-webkit-app-region: no-drag;">
            <li><a class="dropdown-item"  (click)="navegarRuta('/novedades/articulos')">Artículos</a></li>
            <li><a class="dropdown-item"  (click)="navegarRuta('/novedades/articulos-colombia')">Artículos Colombianos</a></li>
            <li><a class="dropdown-item"  (click)="navegarRuta('/novedades/revistas')">Revistas</a></li>
            <li><a class="dropdown-item"  (click)="navegarRuta('/novedades/noticias')">Noticias</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown" style="-webkit-app-region: no-drag;">
          <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            Eventos
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown" style="-webkit-app-region: no-drag;">
            <li><a class="dropdown-item"   (click)="navegarRuta('/eventos/cursos')">Cursos</a></li>
            <li><a class="dropdown-item"  (click)="navegarRuta('/eventos/capacitaciones')">Capacitaciones</a></li>
            <li><a class="dropdown-item"  (click)="navegarRuta('/eventos/congresos')">Congresos</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown" style="-webkit-app-region: no-drag;">
          <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            Normatividad
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" (click)="navegarRuta('/normatividad/leyes')">Leyes</a></li>
            <!--<li><a class="dropdown-item" routerLink="/normatividad/estatutos">Estatutos</a></li>-->
            <li><a class="dropdown-item"  (click)="navegarRuta('/normatividad/decretos')">Decretos</a></li>
            <li><a class="dropdown-item" (click)="navegarRuta('/normatividad/resoluciones')">Resoluciones</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown" style="-webkit-app-region: no-drag;">
          <a class="nav-link" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false"
             (click)="navegarRuta('/panel-busqueda')">
            Panel de búsqueda
          </a>
        </li>
      </ul>
      <div  class="buscadorAndRegistro" >
        <input class="container__input2 form-input-text-square" type="text" placeholder="Buscar...">
        <button class=" boton-ingresar" (click)="login()" *ngIf="!authenticated()"
          style="-webkit-app-region: no-drag;">Ingresar</button>
        <button class="ms-2 boton-registrate" (click)="navegarRuta('/registro')" *ngIf="!authenticated()"
          style="-webkit-app-region: no-drag;">Registrate</button>
        <div class="notify dropstart" *ngIf="authenticated()" style="-webkit-app-region: no-drag;">
          <div class="notify__box position-relative " id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"
            data-bs-auto-close="outside" (click)="notificatiosOpened = true">
            <i class="notify__icon bi bi-bell">
            </i>
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
              *ngIf="!notificatiosOpened && invitaciones?.length! > 0">
              {{invitaciones?.length}}
              <span class="visually-hidden">tienes notificaciones</span>
            </span>
          </div>
          <ul #notifies class="notify__menu notify__menu dropdown-menu p-3 overflow-auto"
            [ngClass]="{'notify__menu--max-heigth' : notifiesHeigth > 356 }" aria-labelledby="dropdownMenuButton1"
            (onresize)="onResize()" style="-webkit-app-region: no-drag;">
            <li class="notify__title"><span
                *ngIf="invitaciones.length > 0 || invitacionesFromUsers.length > 0">Notificaciones</span></li>
            <li class="notify__sub-title"><span *ngIf="invitaciones.length > 0">Solicitudes de asociaciones</span></li>
            <li class="notify__menu-item" *ngFor="let invitacion of invitaciones; let i=index">
              <div class="dropdown-item d-flex flex-row align-items-start">
                <img class="notify__avatar" [src]="invitacion.foto_representante_legal">
                <div class="d-flex flex-column ">
                  <span class="notify__description"><span class="notify__label">{{invitacion?.representante_legal}}</span>
                    te han invitado a indicar que eres miembro de <span
                      class="notify__label">{{invitacion.asociacion}}</span></span>
                  <span class="notify__sub-description">
                    {{timeToNow(invitacion?.fecha_solicitud)}} · ¿Te gustaria ser miembro?
                  </span>
                  <div class="d-flex flex-row mt-2" *ngIf="!invitacion.message">
                    <button class="notify-button btn-square btn--blue"
                      (click)="confirmarInvitacion(invitacion)">Confirmar</button>
                    <button class="notify-button btn-square btn--grey"
                      (click)="eliminarInvitacion(invitacion)">Eliminar</button>
                  </div>
                  <span class="notify__message" *ngIf="invitacion.message">{{invitacion.message}}</span>
                </div>
              </div>
              <hr class="dropdown-divider" *ngIf="i < invitaciones.length - 1">
            </li>
            <li class="notify__sub-title"><span *ngIf="invitacionesFromUsers.length > 0">Solicitudes de usuarios</span>
            </li>
            <li class="notify__menu-item" *ngFor="let invitacion of invitacionesFromUsers; let i=index">
              <div class="dropdown-item d-flex flex-row align-items-start">
                <img class="notify__avatar" [src]="invitacion.foto">
                <div class="d-flex flex-column ">
                  <span class="notify__description"><span class="notify__label">{{invitacion?.nombre_quien_envia}}</span>
                    ha indicado que es miembro de la asociación <span
                      class="notify__label">{{invitacion.asociacion}}</span></span>
                  <span class="notify__sub-description">
                    {{timeToNow(invitacion?.fecha_solicitud)}} · ¿Es miembro de esta asociación?
                  </span>
                  <div class="d-flex flex-row mt-2" *ngIf="!invitacion.message">
                    <button class="notify-button btn-square btn--blue"
                      (click)="confirmarInvitacion(invitacion)">Confirmar</button>
                    <button class="notify-button btn-square btn--grey"
                      (click)="eliminarInvitacion(invitacion)">Eliminar</button>
                  </div>
                  <span class="notify__message" *ngIf="invitacion.message">{{invitacion.message}}</span>
                </div>
              </div>
              <hr class="dropdown-divider" *ngIf="i < invitacionesFromUsers.length - 1">
            </li>
            <div class="search-container" *ngIf="invitaciones.length < 1 && invitacionesFromUsers.length < 1">
              <div class="search-container__box">
                <img class="search-container__image" src="assets/images/inbox_cleanup.svg">
                <h3 class="search-container__title">No se han encontrado resultados</h3>
                <p class="search-container__description">No tienes notificaciones </p>
              </div>
            </div>
            <li *ngFor="let test of tests"><span>{{test}}</span></li>
          </ul>

        </div>
        <div class="dropdown" *ngIf="authenticated()" style="-webkit-app-region: no-drag;">
          <img class="container__img" [src]="authUserPhoto() ? authUserPhoto() : '../../../assets/images/avatar-person.svg'">
          <button class="container__button btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2"
            data-bs-toggle="dropdown" aria-expanded="false">
            {{authUserNomApell()}}
          </button>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
            <li><button class="dropdown-item" type="button" (click)="navegarRuta('/dashboard')">Mi cuenta</button></li>
            <li><button class="dropdown-item" type="button" (click)="navegarRuta('/dashboard/mis-favoritos')">Mis
                favoritos</button>
            </li>
            <li><button class="dropdown-item" type="button" (click)="updatePassword()" *ngIf="authWith()=='email'">Cambiar
                contraseña</button></li>
            <li><button class="dropdown-item" type="button" (click)="logout()">Salir</button></li>
          </ul>
        </div>
      </div>
    </div>

  </div>
</nav>
